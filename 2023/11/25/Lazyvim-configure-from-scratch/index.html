

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=dark>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/myfavicon.png">
  <link rel="icon" href="/img/myfavicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="fanlumaster">
  <meta name="keywords" content="">
  
    <meta name="description" content="谨以此文祭奠我可能已经死掉的 AstroNvim">
<meta property="og:type" content="article">
<meta property="og:title" content="Lazyvim 从零开始配置">
<meta property="og:url" content="http://example.com/2023/11/25/Lazyvim-configure-from-scratch/index.html">
<meta property="og:site_name" content="Flyan Lu&#39;s Blog">
<meta property="og:description" content="谨以此文祭奠我可能已经死掉的 AstroNvim">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.imgur.com/krCmIQu.png">
<meta property="article:published_time" content="2023-11-25T12:17:37.000Z">
<meta property="article:modified_time" content="2024-05-05T11:18:42.092Z">
<meta property="article:author" content="fanlumaster">
<meta property="article:tag" content="Neovim">
<meta property="article:tag" content="未竟">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://i.imgur.com/krCmIQu.png">
  
  
  <title>Lazyvim 从零开始配置 - Flyan Lu&#39;s Blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.6.0/styles/atom-one-dark.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/css/custom.css">
<link rel="stylesheet" href="/css/mastodon-icon/iconfont.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Flyan Lu&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/reading/">
                <i class="iconfont icon-book"></i>
                读书
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://i.imgur.com/krCmIQu.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Lazyvim 从零开始配置">
              
            </span>

            
              <div class="mt-3">
  
      
        <span class="post-meta">
          <i class="iconfont icon-date-fill" aria-hidden="true"></i>
          <time datetime="2023-11-25 20:17" pubdate>
            <!-- 2023年11月25日 晚上 -->
            2023-11-25 20:17
          </time>
        </span>
        
          
            <span>-</span>
            <span class="post-meta">
              <i class="iconfont icon-date-fill" aria-hidden="true"></i>
              <time datetime="2024-05-05 19:18" pubdate>
                <!-- 2024年5月5日 晚上 -->
                2024-05-05 19:18
              </time>
            </span>
            
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      18k 字
    </span>
    

      
        <span class="post-meta mr-2">
          <i class="iconfont icon-clock-fill"></i>
          
            
              149 分钟
        </span>
        

          
            
</div>

<!-- 自定义的更新时间 -->
<!-- <div class="mt-1">
  
    <p class="note note-info">
      
              本文最后更新于：2024年5月5日 晚上
                  
    </p>
    
</div> -->
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Lazyvim 从零开始配置</h1>
            <!-- fanyfull 注释原本的更新时间 start -->
            <!-- 
              <p class="note note-info">
                
                  本文最后更新于：2024年5月5日 晚上
                
              </p>
             -->
            <!-- fanyfull 注释原本的更新时间 end -->
            <div class="markdown-body">
              <p>我的配置托管的地址: <a
target="_blank" rel="noopener" href="https://github.com/fanlumaster/FanyLazyvim"
class="uri">https://github.com/fanlumaster/FanyLazyvim</a>。如果你遇到不清晰的地方，直接到我的代码仓库中查看就可以了。</p>
<p>时光流转。工作的事情告一个段落。近来可以抽出一点时间写博客了。</p>
<p>闲话少叙。</p>
<p>下面将以一个一个小问题的形式，来记录我自己的个性化的设置。</p>
<h2 id="options.lua">options.lua</h2>
<p>这个其实就是对默认的 options
的一个覆盖。其中可能会有需要注意的点。</p>
<p><img src="https://i.imgur.com/4CbOubH.png" srcset="/img/loading.gif" lazyload /></p>
<h3 id="禁用拼写检查">禁用拼写检查</h3>
<p>我不想在写 markdown
文件的时候，还给我整一大堆它误报的语法拼写错误。</p>
<p>在使用 <code>opt</code>
这个变量之前，需要先定义一下。见上面的图片。</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">opt.spell = <span class="hljs-literal">false</span><br></code></pre></div></td></tr></table></figure>
<p>注意：在这里还需要配合 <code>autocmds.lua</code>，因为 Lazyvim 默认对
markdown 加了一个 autocmd，需要修改的地方如下，</p>
<p><img src="https://i.imgur.com/P9uZrGr.png" srcset="/img/loading.gif" lazyload /></p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">augroup</span><span class="hljs-params">(name)</span></span><br>  <span class="hljs-keyword">return</span> vim.api.nvim_create_augroup(<span class="hljs-string">&quot;lazyvim_&quot;</span> .. name, &#123; clear = <span class="hljs-literal">true</span> &#125;)<br><span class="hljs-keyword">end</span><br><br><span class="hljs-comment">-- wrap and check for spell in text filetypes</span><br>vim.api.nvim_create_autocmd(<span class="hljs-string">&quot;FileType&quot;</span>, &#123;<br>  group = augroup(<span class="hljs-string">&quot;wrap_spell&quot;</span>),<br>  pattern = &#123; <span class="hljs-string">&quot;gitcommit&quot;</span>, <span class="hljs-string">&quot;markdown&quot;</span> &#125;,<br>  callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>    vim.opt_local.<span class="hljs-built_in">wrap</span> = <span class="hljs-literal">true</span><br>    vim.opt_local.spell = <span class="hljs-literal">false</span> <span class="hljs-comment">-- 覆盖默认的 true</span><br>  <span class="hljs-keyword">end</span>,<br>&#125;)<br></code></pre></div></td></tr></table></figure>
<h3 id="开启-wrap-自动折行">开启 wrap 自动折行</h3>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">opt.<span class="hljs-built_in">wrap</span> = <span class="hljs-literal">true</span><br></code></pre></div></td></tr></table></figure>
<h3 id="禁用相对行号">禁用相对行号</h3>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">opt.relativenumber = <span class="hljs-literal">false</span><br></code></pre></div></td></tr></table></figure>
<h3 id="设置-gui-字体">设置 gui 字体</h3>
<p>这里我使用的 gui 是 neovide。</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">opt.guifont = &#123;<span class="hljs-string">&quot;CaskaydiaCove Nerd Font&quot;</span>, <span class="hljs-string">&quot;Source Han Sans CN&quot;</span>, <span class="hljs-string">&quot;微软雅黑&quot;</span>, <span class="hljs-string">&quot;Maple Mono SC NF&quot;</span>, <span class="hljs-string">&quot;:h13&quot;</span>&#125;<br></code></pre></div></td></tr></table></figure>
<p>按：这里需要使用的字体肯定是要提前安装好的哈。</p>
<h3 id="显示空白字符">显示空白字符</h3>
<p><img src="https://i.imgur.com/T5l0Jmo.png" srcset="/img/loading.gif" lazyload /></p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">opt.list = <span class="hljs-literal">true</span><br>opt.listchars = &#123; space = <span class="hljs-string">&quot;·&quot;</span> &#125;<br></code></pre></div></td></tr></table></figure>
<p>参考<a
target="_blank" rel="noopener" href="https://vi.stackexchange.com/questions/31811/neovim-lua-config-how-to-append-to-listchars">这里</a>。</p>
<h3 id="windows-中设置-shell-为-pwsh7">Windows 中设置 shell 为
pwsh7</h3>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">opt.shell = <span class="hljs-string">&quot;pwsh&quot;</span><br>opt.shellcmdflag = <span class="hljs-string">&quot;-command&quot;</span><br>opt.shellquote = <span class="hljs-string">&#x27;&quot;&#x27;</span><br>opt.shellxquote = <span class="hljs-string">&quot;&quot;</span><br></code></pre></div></td></tr></table></figure>
<h3 id="设置-conceals-的级别">设置 conceals 的级别</h3>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">opt.conceallevel = <span class="hljs-number">0</span><br></code></pre></div></td></tr></table></figure>
<p>这里肯定是设置成 0
比较好，不然，有些东西它自动给我们隐藏了，比如，markdown
中的代码块的标记。</p>
<h3 id="设置-neovide-的光标颜色">设置 neovide 的光标颜色</h3>
<p>这个需要在 lazy.lua 里面进行设置，当然，如果直接在最外层的 init.lua
中设置应该也是可以的。</p>
<p><img src="https://i.imgur.com/FKacPyl.png" srcset="/img/loading.gif" lazyload /></p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-comment">-- 设置光标的颜色默认为拉姆的发(fà)色</span><br>vim.cmd(<span class="hljs-string">&#x27;highlight Cursor gui=NONE guifg=bg guibg=#ffb6c1&#x27;</span>)<br></code></pre></div></td></tr></table></figure>
<h2 id="keymaps">keymaps</h2>
<h3 id="去除-搜索文件的默认映射">去除 <leader><leader>
搜索文件的默认映射</h3>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> upmap = vim.keymap.del<br><span class="hljs-comment">-- 去掉 &lt;leader&gt;&lt;leader&gt; 来搜索文件的映射</span><br>unmap(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;&lt;space&gt;&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Find Files (root dir)&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<p>按：这个需要在 lazy.lua
中进行删除。好吧，这里暂时有点问题，去不干净。后面再说。</p>
<h3 id="添加切换-gui-光标颜色的键盘映射">添加切换 gui
光标颜色的键盘映射</h3>
<p><img src="https://i.imgur.com/Ujd2bXd.png" srcset="/img/loading.gif" lazyload /></p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-comment">-- toggle color between 雷姆蓝 and 拉姆粉</span><br><span class="hljs-keyword">local</span> color_switch = <span class="hljs-number">0</span><br><span class="hljs-keyword">local</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toggle_color</span><span class="hljs-params">()</span></span><br>  <span class="hljs-keyword">if</span> color_switch == <span class="hljs-number">1</span> <span class="hljs-keyword">then</span><br>    color_switch = <span class="hljs-number">0</span><br>    vim.cmd(<span class="hljs-string">&quot;highlight Cursor gui=NONE guifg=bg guibg=#ffb6c1&quot;</span>)<br>  <span class="hljs-keyword">else</span><br>    color_switch = <span class="hljs-number">1</span><br>    vim.cmd(<span class="hljs-string">&quot;highlight Cursor gui=NONE guifg=bg guibg=#91bef0&quot;</span>)<br>  <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br>map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;&lt;leader&gt;t&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>  toggle_color()<br><span class="hljs-keyword">end</span>, &#123; desc = <span class="hljs-string">&quot;Toggle gui cursor color&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<h3 id="映射-leader-w-保存当前文件">映射 leader w 保存当前文件</h3>
<p>首先，在 keymaps.lua 中去掉原来的映射，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-comment">-- 去掉 &lt;leader&gt;w 的映射</span><br>unmap(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;ww&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Other window&quot;</span> &#125;)<br>unmap(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;wd&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Delete window&quot;</span> &#125;)<br>unmap(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;w-&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Split window below&quot;</span> &#125;)<br>unmap(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;w|&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Split window right&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<p>然后，这里需要在 lazy.lua 中加新的快捷键映射，不然会被覆盖掉，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">local</span> map = vim.keymap.set<br><span class="hljs-comment">-- 添加 &lt;leader&gt;w 来保存当前buffer 的映射</span><br>map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;w&quot;</span>, <span class="hljs-string">&quot;&lt;cmd&gt;w&lt;cr&gt;&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Save&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<h3 id="映射-t-和-t-为切换-tab">映射 <code>[t</code> 和 <code>]t</code>
为切换 tab</h3>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;]t&quot;</span>, <span class="hljs-string">&quot;&lt;cmd&gt;tabnext&lt;cr&gt;&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Next Tab&quot;</span> &#125;)<br>map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;[t&quot;</span>, <span class="hljs-string">&quot;&lt;cmd&gt;tabprevious&lt;cr&gt;&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Previous Tab&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<h3 id="映射-leader-r-关闭当前的-buffer">映射 leader r 关闭当前的
buffer</h3>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;r&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>  <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;mini.bufremove&quot;</span>).delete(<span class="hljs-number">0</span>, <span class="hljs-literal">true</span>)<br><span class="hljs-keyword">end</span>, &#123; desc = <span class="hljs-string">&quot;Close current buffer&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<h3 id="去除-leader-l-的映射">去除 leader l 的映射</h3>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">unmap(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;l&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Lazy&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<h3 id="映射执行-python-单脚本快捷键">映射执行 python 单脚本快捷键</h3>
<p>前提：安装并配置好 toggleterm。(可以见下文)</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-comment">-- running single python codes</span><br>map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;py&quot;</span>, <span class="hljs-string">&#x27;&lt;cmd&gt;TermExec cmd=&quot;python %&quot;&lt;cr&gt;&#x27;</span>, &#123; desc = <span class="hljs-string">&quot;Run python codes&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<h3 id="映射执行-java-的-maven-简单项目的快捷键">映射执行 java 的 maven
简单项目的快捷键</h3>
<p>前提：可以看我的另一篇<a
target="_blank" rel="noopener" href="https://fanlumaster.github.io/2023/11/05/Neovim-%E9%85%8D%E7%BD%AE-Java-%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">博客</a>。主要采取了
pwsh 脚本批处理的思路来执行单个 java 文件。</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-comment">-- run java maven project</span><br>map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;ja&quot;</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>  <span class="hljs-keyword">local</span> current_file = vim.fn.expand(<span class="hljs-string">&quot;%:p&quot;</span>)<br>  <span class="hljs-keyword">local</span> cmd_str = <span class="hljs-string">&quot;TermExec cmd=&quot;</span> .. <span class="hljs-string">&#x27;&quot;C:\\EDisk\\powershellCodes\\javaScripts\\run.ps1&#x27;</span> .. <span class="hljs-string">&quot; &quot;</span> .. current_file .. <span class="hljs-string">&#x27;&quot;&#x27;</span><br>  vim.cmd(cmd_str)<br><span class="hljs-keyword">end</span>, &#123; desc = <span class="hljs-string">&quot;Run java codes&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<h2 id="autocmds">autocmds</h2>
<p>这个在 autocmds.lua 文件里面进行修改就可以了。</p>
<p><img src="https://i.imgur.com/XKCl2pN.png" srcset="/img/loading.gif" lazyload /></p>
<h3 id="关联-htmldjango-到-html">关联 htmldjango 到 html</h3>
<p>为了便于使用 html-lsp 来进行格式化。</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">vim.api.nvim_create_autocmd(<span class="hljs-string">&quot;FileType&quot;</span>, &#123;<br>  group = augroup(<span class="hljs-string">&quot;associate_filetype&quot;</span>),<br>  pattern = &#123; <span class="hljs-string">&quot;htmldjango&quot;</span> &#125;,<br>  callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>    vim.api.nvim_command(<span class="hljs-string">&quot;set filetype=html&quot;</span>)<br>  <span class="hljs-keyword">end</span>,<br>&#125;)<br></code></pre></div></td></tr></table></figure>
<h2 id="bufferline.nvim">bufferline.nvim</h2>
<p>如果想要覆盖 bufferline.nvim 在 Lazynvim
中的默认的配置的话，我这里就是直接在 <code>lua/plugins/</code>
下面新建一个 <code>bufferline.lua</code>
配置了，这个在文档里面也有讲类似。</p>
<p><img src="https://i.imgur.com/VV5Kesd.png" srcset="/img/loading.gif" lazyload /></p>
<h3 id="buffer-标题的斜体和加粗设置">buffer 标题的斜体和加粗设置</h3>
<p><a
target="_blank" rel="noopener" href="https://www.lazyvim.org/plugins/ui#bufferlinenvim">文档</a>。</p>
<p>我这里需要的效果是把当前的这个 buffer
的标题的斜体(italic)和加粗效果给去掉，因为这在 neovide
中显示效果会比较好，以及，对中文比较友好，</p>
<p><img src="https://i.imgur.com/L9uL9ax.png" srcset="/img/loading.gif" lazyload /></p>
<p>按：上面图片中的 <code>buffer_visiable</code> 似乎不是一个 valid
的选项，所以，以下面的我实际给出的 lua 代码为准，</p>
<p>具体的设置如下，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-string">&quot;akinsho/bufferline.nvim&quot;</span>,<br>  event = <span class="hljs-string">&quot;VeryLazy&quot;</span>,<br>  opts = &#123;<br>    options = &#123;&#125;,<br>    highlights = &#123;<br>      buffer_selected = &#123; italic = <span class="hljs-literal">false</span>, bold = <span class="hljs-literal">false</span> &#125;,<br>    &#125;,<br>  &#125;,<br>  <span class="hljs-built_in">config</span> = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(_, opts)</span></span><br>    <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;bufferline&quot;</span>).setup(opts)<br>    <span class="hljs-comment">-- Fix bufferline when restoring a session</span><br>    vim.api.nvim_create_autocmd(<span class="hljs-string">&quot;BufAdd&quot;</span>, &#123;<br>      callback = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>        vim.schedule(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>          <span class="hljs-built_in">pcall</span>(nvim_bufferline)<br>        <span class="hljs-keyword">end</span>)<br>      <span class="hljs-keyword">end</span>,<br>    &#125;)<br>  <span class="hljs-keyword">end</span>,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<h3 id="去掉当前-buffer-的提示条">去掉当前 buffer 的提示条</h3>
<p><img src="https://i.imgur.com/Ch8w8zj.png" srcset="/img/loading.gif" lazyload /></p>
<p>在 options 里面加上如下配置，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">indicator_icon = <span class="hljs-string">&quot; &quot;</span>,<br></code></pre></div></td></tr></table></figure>
<h3 id="去掉两个分隔条">去掉两个分隔条</h3>
<p><img src="https://i.imgur.com/LHy5Lzr.png" srcset="/img/loading.gif" lazyload /></p>
<p>这个可以在 <code>:h bufferline-styling</code> 找到提示，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">separator_style = &#123;<span class="hljs-string">&quot; &quot;</span>, <span class="hljs-string">&quot; &quot;</span>&#125;,<br></code></pre></div></td></tr></table></figure>
<h2 id="tokyonight.nvim">tokyonight.nvim</h2>
<p>新建一个 tokyonight.lua 代码文件。</p>
<p><img src="https://i.imgur.com/VV5Kesd.png" srcset="/img/loading.gif" lazyload /></p>
<h3 id="tokyonight-取消一些斜体">tokyonight 取消一些斜体</h3>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">return</span> &#123;<br>  &#123; <span class="hljs-string">&quot;shaunsingh/oxocarbon.nvim&quot;</span> &#125;,<br>  &#123; <span class="hljs-string">&quot;ellisonleao/gruvbox.nvim&quot;</span> &#125;,<br>  &#123; <span class="hljs-string">&quot;rose-pine/neovim&quot;</span>, name = <span class="hljs-string">&quot;rose-pine&quot;</span> &#125;,<br>  &#123;<br>    <span class="hljs-string">&quot;tokyonight.nvim&quot;</span>,<br>    priority = <span class="hljs-number">1000</span>,<br>    opts = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>      <span class="hljs-keyword">return</span> &#123;<br>        style = <span class="hljs-string">&quot;moon&quot;</span>,<br>        <span class="hljs-comment">-- transparent = true,</span><br>        styles = &#123;<br>          sidebars = <span class="hljs-string">&quot;transparent&quot;</span>,<br>          floats = <span class="hljs-string">&quot;transparent&quot;</span>,<br>          comments = &#123; italic = <span class="hljs-literal">false</span> &#125;,<br>          keywords = &#123; italic = <span class="hljs-literal">false</span> &#125;,<br>          functions = &#123; italic = <span class="hljs-literal">false</span> &#125;,<br>          variables = &#123; italic = <span class="hljs-literal">false</span> &#125;,<br>        &#125;,<br>      &#125;<br>    <span class="hljs-keyword">end</span>,<br>  &#125;,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<h2 id="nvim-treesitter">nvim-treesitter</h2>
<p>这里在配置之外，我们需要全局安装 tree-sitter-cli，</p>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">npm install -g tree-sitter-cli<br></code></pre></div></td></tr></table></figure>
<p>或者，使用 yarn 也是可以的，</p>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">yarn global add tree-sitter-cli<br></code></pre></div></td></tr></table></figure>
<p>然后，还需要配置好 Visutal Studio 的 C++ 环境，然后，添加 clang
的环境变量，</p>
<p><img src="https://i.imgur.com/rrgqYXI.png" srcset="/img/loading.gif" lazyload /></p>
<p><img src="https://i.imgur.com/Y5cYU19.png" srcset="/img/loading.gif" lazyload /></p>
<p>因为，在 Lazyvim 中使用 tree-sitter 的命令 <code>TSInstall</code>
某个插件的时候，是需要使用这个来进行编译的，比如，我们这里安装一个 cpp
的 tree-sitter 语法解析器，</p>
<figure class="highlight shell"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs shell">:TSInstall cpp<br></code></pre></div></td></tr></table></figure>
<p>它是先下载，然后编译，之后才算是安装好，</p>
<p><img src="https://i.imgur.com/LZ6r4PW.png" srcset="/img/loading.gif" lazyload /></p>
<p><img src="https://i.imgur.com/Kd80xa7.png" srcset="/img/loading.gif" lazyload /></p>
<p>此外，还有一些常用的命令，比如，</p>
<ul>
<li><code>TSUpdate all</code>:
更新所有的已安装的解析器，这个一般是在我们更新完 tree-sitter
之后，如果默认的更新某些语法解析器失败了，那么，我们就可以使用这个命令来进行重新尝试</li>
<li><code>TSUpdate cpp</code>: 更新 cpp 的解析器</li>
</ul>
<h2 id="markdown-代码块语法和-autopair-的冲突">markdown 代码块语法和
autopair 的冲突</h2>
<p>插件是 mini.pairs。</p>
<p>在使用三个 backticks 的时候，Lazyvim
处理得不好，但是目前没有找到合适的方法。暂时使用 cb(code block)
这个默认自带的 snippets 来将就一下。</p>
<h2 id="hop.nvim">hop.nvim</h2>
<p><img src="https://i.imgur.com/mPtReNx.png" srcset="/img/loading.gif" lazyload /></p>
<p>首先，安装这个插件，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-string">&quot;smoka7/hop.nvim&quot;</span>,<br>  version = <span class="hljs-string">&quot;*&quot;</span>,<br>  opts = &#123;&#125;,<br>  keys = &#123;<br>    &#123;<br>      <span class="hljs-string">&quot;s&quot;</span>,<br>      <span class="hljs-comment">-- function() require(&quot;hop&quot;).hint_words() end,</span><br>      mode = &#123; <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;v&quot;</span> &#125;,<br>      desc = <span class="hljs-string">&quot;Hop hint words&quot;</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;&lt;S-s&gt;&quot;</span>,<br>      <span class="hljs-comment">-- function() require(&quot;hop&quot;).hint_lines() end,</span><br>      mode = &#123; <span class="hljs-string">&quot;n&quot;</span> &#125;,<br>      desc = <span class="hljs-string">&quot;Hop hint lines&quot;</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;s&quot;</span>,<br>      <span class="hljs-comment">-- function() require(&quot;hop&quot;).hint_words &#123; extend_visual = true &#125; end,</span><br>      mode = &#123; <span class="hljs-string">&quot;v&quot;</span> &#125;,<br>      desc = <span class="hljs-string">&quot;Hop hint words&quot;</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;&lt;S-s&gt;&quot;</span>,<br>      <span class="hljs-comment">-- function() require(&quot;hop&quot;).hint_lines &#123; extend_visual = true &#125; end,</span><br>      mode = &#123; <span class="hljs-string">&quot;v&quot;</span> &#125;,<br>      desc = <span class="hljs-string">&quot;Hop hint lines&quot;</span>,<br>    &#125;,<br>  &#125;,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>然后，在 keymaps.lua 中进行配置我熟悉的快捷键，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-comment">-- for hop.nvim</span><br><span class="hljs-keyword">local</span> hop = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;hop&quot;</span>)<br><span class="hljs-keyword">local</span> directions = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;hop.hint&quot;</span>).HintDirection<br><span class="hljs-keyword">local</span> positions = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;hop.hint&quot;</span>).HintPosition<br><span class="hljs-comment">-- leader leader w</span><br>map(&#123; <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;v&quot;</span> &#125;, <span class="hljs-string">&quot;&lt;leader&gt;&lt;leader&gt;w&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>  hop.hint_words(&#123; direction = directions.AFTER_CURSOR &#125;)<br><span class="hljs-keyword">end</span>, &#123; desc = <span class="hljs-string">&quot;Go to next any begining of words&quot;</span> &#125;)<br><span class="hljs-comment">-- leader leader e</span><br>map(&#123; <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;v&quot;</span> &#125;, <span class="hljs-string">&quot;&lt;leader&gt;&lt;leader&gt;e&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>  hop.hint_words(&#123; direction = directions.AFTER_CURSOR, hint_position = positions.END &#125;)<br><span class="hljs-keyword">end</span>, &#123; desc = <span class="hljs-string">&quot;Go to next any end of words&quot;</span> &#125;)<br><span class="hljs-comment">-- leader leader b</span><br>map(&#123; <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;v&quot;</span> &#125;, <span class="hljs-string">&quot;&lt;leader&gt;&lt;leader&gt;b&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>  hop.hint_words(&#123; direction = directions.BEFORE_CURSOR &#125;)<br><span class="hljs-keyword">end</span>, &#123; desc = <span class="hljs-string">&quot;Go to previous any begining of words&quot;</span> &#125;)<br><span class="hljs-comment">-- leader leader b</span><br>map(&#123; <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;v&quot;</span> &#125;, <span class="hljs-string">&quot;&lt;leader&gt;&lt;leader&gt;v&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>  hop.hint_words(&#123; direction = directions.BEFORE_CURSOR, hint_position = positions.END &#125;)<br><span class="hljs-keyword">end</span>, &#123; desc = <span class="hljs-string">&quot;Go to previous any end of words&quot;</span> &#125;)<br><span class="hljs-comment">-- leader leader a</span><br>map(&#123; <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;v&quot;</span> &#125;, <span class="hljs-string">&quot;&lt;leader&gt;&lt;leader&gt;a&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>  hop.hint_anywhere(&#123;&#125;)<br><span class="hljs-keyword">end</span>, &#123; desc = <span class="hljs-string">&quot;Go to any char&quot;</span> &#125;)<br><span class="hljs-comment">-- leader leader j</span><br>map(&#123; <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;v&quot;</span> &#125;, <span class="hljs-string">&quot;&lt;leader&gt;&lt;leader&gt;j&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>  hop.hint_lines(&#123; direction = directions.AFTER_CURSOR &#125;)<br><span class="hljs-keyword">end</span>, &#123; desc = <span class="hljs-string">&quot;Go to line below&quot;</span> &#125;)<br><span class="hljs-comment">-- leader leader k</span><br>map(&#123; <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;v&quot;</span> &#125;, <span class="hljs-string">&quot;&lt;leader&gt;&lt;leader&gt;k&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>  hop.hint_lines(&#123; direction = directions.BEFORE_CURSOR &#125;)<br><span class="hljs-keyword">end</span>, &#123; desc = <span class="hljs-string">&quot;Go to line above&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<h2 id="telescope.nvim">telescope.nvim</h2>
<p>重新定义一些快捷键。这里是借鉴了 AstroNvim 中的一些快捷键。</p>
<p>以及，禁用了一些快捷键，比如，这个我后面有大用途的
<code>&lt;leader&gt;&lt;leader&gt;</code> 键。</p>
<p><img src="https://i.imgur.com/h5t7f7O.png" srcset="/img/loading.gif" lazyload /></p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-string">&quot;nvim-telescope/telescope.nvim&quot;</span>,<br>  keys = &#123;<br>    <span class="hljs-comment">-- disable the default keymap to search files</span><br>    &#123; <span class="hljs-string">&quot;&lt;leader&gt;&lt;space&gt;&quot;</span>, <span class="hljs-literal">false</span> &#125;,<br>    <span class="hljs-comment">-- disable the keymap to grep file</span><br>    &#123; <span class="hljs-string">&quot;&lt;leader&gt;/&quot;</span>, <span class="hljs-literal">false</span> &#125;,<br>    <span class="hljs-comment">-- change a keymap</span><br>    &#123;<br>      <span class="hljs-string">&quot;&lt;leader&gt;ff&quot;</span>,<br>      <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>        <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;telescope.builtin&quot;</span>).find_files()<br>      <span class="hljs-keyword">end</span>,<br>      desc = <span class="hljs-string">&quot;Find files&quot;</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;&lt;leader&gt;fF&quot;</span>,<br>      <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>        <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;telescope.builtin&quot;</span>).find_files(&#123; hidden = <span class="hljs-literal">true</span>, no_ignore = <span class="hljs-literal">true</span> &#125;)<br>      <span class="hljs-keyword">end</span>,<br>      desc = <span class="hljs-string">&quot;Find all files&quot;</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;&lt;leader&gt;fw&quot;</span>,<br>      <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>        <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;telescope.builtin&quot;</span>).live_grep()<br>      <span class="hljs-keyword">end</span>,<br>      desc = <span class="hljs-string">&quot;Find words&quot;</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;&lt;leader&gt;fW&quot;</span>,<br>      <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>        <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;telescope.builtin&quot;</span>).live_grep(&#123;<br>          additional_args = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(args)</span></span><br>            <span class="hljs-keyword">return</span> vim.list_extend(args, &#123; <span class="hljs-string">&quot;--hidden&quot;</span>, <span class="hljs-string">&quot;--no-ignore&quot;</span> &#125;)<br>          <span class="hljs-keyword">end</span>,<br>        &#125;)<br>      <span class="hljs-keyword">end</span>,<br>      desc = <span class="hljs-string">&quot;Find words&quot;</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;&lt;leader&gt;fc&quot;</span>,<br>      <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>        <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;telescope.builtin&quot;</span>).commands()<br>      <span class="hljs-keyword">end</span>,<br>      desc = <span class="hljs-string">&quot;Find commands&quot;</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;&lt;leader&gt;fC&quot;</span>,<br>      <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>        <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;telescope.builtin&quot;</span>).grep_string()<br>      <span class="hljs-keyword">end</span>,<br>      desc = <span class="hljs-string">&quot;Find word under cursor&quot;</span>,<br>    &#125;,<br>    &#123;<br>      <span class="hljs-string">&quot;&lt;leader&gt;fb&quot;</span>,<br>      <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>        <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;telescope.builtin&quot;</span>).buffers()<br>      <span class="hljs-keyword">end</span>,<br>      desc = <span class="hljs-string">&quot;Find buffers&quot;</span>,<br>    &#125;,<br>    <span class="hljs-comment">-- add a keymap to browse plugin files</span><br>    &#123; <span class="hljs-string">&quot;&lt;leader&gt;fp&quot;</span>, <span class="hljs-literal">false</span> &#125;,<br>  &#125;,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<h2 id="toggleterm">toggleterm</h2>
<p><img src="https://i.imgur.com/G6IdU4e.png" srcset="/img/loading.gif" lazyload /></p>
<p><img src="https://i.imgur.com/TAPLl6P.png" srcset="/img/loading.gif" lazyload /></p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-string">&quot;akinsho/toggleterm.nvim&quot;</span>,<br>  cmd = &#123; <span class="hljs-string">&quot;ToggleTerm&quot;</span>, <span class="hljs-string">&quot;TermExec&quot;</span> &#125;,<br>  opts = &#123;<br>    highlights = &#123;<br>      Normal = &#123; link = <span class="hljs-string">&quot;Normal&quot;</span> &#125;,<br>      NormalNC = &#123; link = <span class="hljs-string">&quot;NormalNC&quot;</span> &#125;,<br>      NormalFloat = &#123; link = <span class="hljs-string">&quot;NormalFloat&quot;</span> &#125;,<br>      FloatBorder = &#123; link = <span class="hljs-string">&quot;FloatBorder&quot;</span> &#125;,<br>      StatusLine = &#123; link = <span class="hljs-string">&quot;StatusLine&quot;</span> &#125;,<br>      StatusLineNC = &#123; link = <span class="hljs-string">&quot;StatusLineNC&quot;</span> &#125;,<br>      WinBar = &#123; link = <span class="hljs-string">&quot;WinBar&quot;</span> &#125;,<br>      WinBarNC = &#123; link = <span class="hljs-string">&quot;WinBarNC&quot;</span> &#125;,<br>    &#125;,<br>    size = <span class="hljs-number">10</span>,<br>    on_create = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>      vim.opt.foldcolumn = <span class="hljs-string">&quot;0&quot;</span><br>      vim.opt.signcolumn = <span class="hljs-string">&quot;no&quot;</span><br>    <span class="hljs-keyword">end</span>,<br>    open_mapping = <span class="hljs-string">[[&lt;F7&gt;]]</span>,<br>    shading_factor = <span class="hljs-number">2</span>,<br>    direction = <span class="hljs-string">&quot;float&quot;</span>,<br>    float_opts = &#123; border = <span class="hljs-string">&quot;rounded&quot;</span> &#125;,<br>  &#125;,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>注册了三个命令，</p>
<ul>
<li><code>leader+th</code>: 水平调出一个 term；</li>
<li><code>leader+tf</code>: 调出一个浮动的 term；</li>
<li><code>leader+fv</code>: 垂直调出一个 term。</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-comment">-- toggleterm</span><br>map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;th&quot;</span>, <span class="hljs-string">&quot;&lt;cmd&gt;ToggleTerm size=10 direction=horizontal&lt;cr&gt;&quot;</span>, &#123; desc = <span class="hljs-string">&quot;ToggleTerm horizontal split&quot;</span> &#125;)<br>map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;tf&quot;</span>, <span class="hljs-string">&quot;&lt;cmd&gt;ToggleTerm direction=float&lt;cr&gt;&quot;</span>, &#123; desc = <span class="hljs-string">&quot;ToggleTerm float&quot;</span> &#125;)<br>map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;tv&quot;</span>, <span class="hljs-string">&quot;&lt;cmd&gt;ToggleTerm size=80 direction=vertical&lt;cr&gt;&quot;</span>, &#123; desc = <span class="hljs-string">&quot;ToggleTerm vertical split&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<h2 id="mason">mason</h2>
<p><img src="https://i.imgur.com/tS3ihtv.png" srcset="/img/loading.gif" lazyload /></p>
<p>这里我只是简单地确保一些 lsp 有被安装，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-string">&quot;williamboman/mason.nvim&quot;</span>,<br>  opts = &#123;<br>    ensure_installed = &#123;<br>      <span class="hljs-string">&quot;html-lsp&quot;</span>,<br>    &#125;,<br>  &#125;,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<h2 id="conform.nvim">conform.nvim</h2>
<p>给一些语言指定格式化的插件或者说，lsp。</p>
<p>前提：npm 全局安装 prettier，nvim 中 mason 安装 prettier。</p>
<p>然后，在 conform.lua 中添加设置，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-string">&quot;stevearc/conform.nvim&quot;</span>,<br>  optional = <span class="hljs-literal">true</span>,<br>  opts = &#123;<br>    formatters_by_ft = &#123;<br>      <span class="hljs-comment">-- autopep8 似乎要比 black 要快一些</span><br>      [<span class="hljs-string">&quot;python&quot;</span>] = &#123; <span class="hljs-string">&quot;autopep8&quot;</span> &#125;,<br>      [<span class="hljs-string">&quot;css&quot;</span>] = &#123; <span class="hljs-string">&quot;prettier&quot;</span> &#125;,<br>      [<span class="hljs-string">&quot;html&quot;</span>] = &#123; <span class="hljs-string">&quot;html-lsp&quot;</span> &#125;,<br>      [<span class="hljs-string">&quot;htmldjango&quot;</span>] = &#123; <span class="hljs-string">&quot;html-lsp&quot;</span> &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><strong>然后</strong>，如果我们想自定义格式化的 options
该怎么办呢？可以参考下面的文档，</p>
<p><a
target="_blank" rel="noopener" href="https://github.com/stevearc/conform.nvim#customizing-formatters"
class="uri">https://github.com/stevearc/conform.nvim#customizing-formatters</a></p>
<p>这里，我以 autopep8 举例，限制折行的格式化长度，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;conform&quot;</span>).formatters.autopep8 = &#123;<br>  prepend_args = &#123; <span class="hljs-string">&quot;--max-line-length&quot;</span>, <span class="hljs-string">&quot;158&quot;</span> &#125;,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><strong>此外</strong>，如果想在 <code>import</code>
包之前来一些语句，比如，像下面这样，我不想格式化功能自动把
<code>import</code> 语句提到前面去，</p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># 引入二叉树相关的包</span><br>sys.path.insert(<span class="hljs-number">0</span>, os.path.abspath(<br>    os.path.join(os.path.dirname(__file__), <span class="hljs-string">&quot;..&quot;</span>)))<br><span class="hljs-keyword">from</span> utils.buildTreeFromLevelOrder <span class="hljs-keyword">import</span> TreeNode, buildTreeFromLevelOrder<br></code></pre></div></td></tr></table></figure>
<p>这时，我们可以在上面的基础上再加一个配置，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;conform&quot;</span>).formatters.autopep8 = &#123;<br>  <span class="hljs-comment">-- E402 表示允许在 import 之前写一些 statements</span><br>  prepend_args = &#123; <span class="hljs-string">&quot;--max-line-length&quot;</span>, <span class="hljs-string">&quot;158&quot;</span>, <span class="hljs-string">&quot;--ignore&quot;</span>, <span class="hljs-string">&quot;E402&quot;</span>, &#125;,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<h2 id="nvim-surround.nvim">nvim-surround.nvim</h2>
<p>这个插件其实现在也是必需的了。对于修改引号、括号之类非常方便。</p>
<p>这里用默认的设置就行，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-string">&quot;kylechui/nvim-surround&quot;</span>,<br>  version = <span class="hljs-string">&quot;*&quot;</span>, <span class="hljs-comment">-- Use for stability; omit to use `main` branch for the latest features</span><br>  event = <span class="hljs-string">&quot;VeryLazy&quot;</span>,<br>  <span class="hljs-built_in">config</span> = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span><br>    <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;nvim-surround&quot;</span>).setup(&#123;&#125;)<br>  <span class="hljs-keyword">end</span>,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<h2 id="persisted.nvim">persisted.nvim</h2>
<p>这个是用来记录 sessions 的，类似于其他编辑器中的 open recent
projects，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-string">&quot;olimorris/persisted.nvim&quot;</span>,<br>  <span class="hljs-built_in">config</span> = <span class="hljs-literal">true</span>,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>然后绑定一个 keymap，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-comment">-- for persisted</span><br>map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;leader&gt;fs&quot;</span>, <span class="hljs-string">&quot;&lt;cmd&gt;Telescope persisted&lt;cr&gt;&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Search history sessions&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<p>然后，在 dashboard 中添加一下这个选项，这里只截取部分关键的代码，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">center = &#123;<br>  &#123; action = <span class="hljs-string">&quot;Telescope find_files&quot;</span>,                                     desc = <span class="hljs-string">&quot; Find file&quot;</span>,       icon = <span class="hljs-string">&quot; &quot;</span>, key = <span class="hljs-string">&quot;f&quot;</span> &#125;,<br>  &#123; action = <span class="hljs-string">&quot;ene | startinsert&quot;</span>,                                        desc = <span class="hljs-string">&quot; New file&quot;</span>,        icon = <span class="hljs-string">&quot; &quot;</span>, key = <span class="hljs-string">&quot;n&quot;</span> &#125;,<br>  &#123; action = <span class="hljs-string">&quot;Telescope oldfiles&quot;</span>,                                       desc = <span class="hljs-string">&quot; Recent files&quot;</span>,    icon = <span class="hljs-string">&quot; &quot;</span>, key = <span class="hljs-string">&quot;r&quot;</span> &#125;,<br>  &#123; action = <span class="hljs-string">&quot;Telescope live_grep&quot;</span>,                                      desc = <span class="hljs-string">&quot; Find text&quot;</span>,       icon = <span class="hljs-string">&quot; &quot;</span>, key = <span class="hljs-string">&quot;g&quot;</span> &#125;,<br>  &#123; action = <span class="hljs-string">[[lua require(&quot;lazyvim.util&quot;).telescope.config_files()()]]</span>, desc = <span class="hljs-string">&quot; Config&quot;</span>,          icon = <span class="hljs-string">&quot; &quot;</span>, key = <span class="hljs-string">&quot;c&quot;</span> &#125;,<br>  &#123; action = <span class="hljs-string">&#x27;lua require(&quot;persistence&quot;).load()&#x27;</span>,                        desc = <span class="hljs-string">&quot; Restore Session&quot;</span>, icon = <span class="hljs-string">&quot; &quot;</span>, key = <span class="hljs-string">&quot;s&quot;</span> &#125;,<br>  &#123; action = <span class="hljs-string">&#x27;Telescope persisted&#x27;</span>,                                      desc = <span class="hljs-string">&quot; Search sessions&quot;</span>, icon = <span class="hljs-string">&quot; &quot;</span>, key = <span class="hljs-string">&quot;S&quot;</span> &#125;,<br>  &#123; action = <span class="hljs-string">&quot;LazyExtras&quot;</span>,                                               desc = <span class="hljs-string">&quot; Lazy Extras&quot;</span>,     icon = <span class="hljs-string">&quot; &quot;</span>, key = <span class="hljs-string">&quot;x&quot;</span> &#125;,<br>  &#123; action = <span class="hljs-string">&quot;Lazy&quot;</span>,                                                     desc = <span class="hljs-string">&quot; Lazy&quot;</span>,            icon = <span class="hljs-string">&quot;󰒲 &quot;</span>, key = <span class="hljs-string">&quot;l&quot;</span> &#125;,<br>  &#123; action = <span class="hljs-string">&quot;qa&quot;</span>,                                                       desc = <span class="hljs-string">&quot; Quit&quot;</span>,            icon = <span class="hljs-string">&quot; &quot;</span>, key = <span class="hljs-string">&quot;q&quot;</span> &#125;,<br>&#125;,<br></code></pre></div></td></tr></table></figure>
<h2 id="differview">differview</h2>
<p>你想获得和 IDEA
中类似的在代码提交之前的检视效果吗？那就试一试这个插件吧。</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-string">&quot;sindrets/diffview.nvim&quot;</span>,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p>最常用的两个命令是，</p>
<ul>
<li><code>:DiffviewOpen</code></li>
<li><code>:DiffviewClose</code></li>
</ul>
<p>看看效果，</p>
<p><img src="https://i.imgur.com/TN1KHOs.png" srcset="/img/loading.gif" lazyload /></p>
<hr />
<h2 id="一些问题">一些问题</h2>
<h3 id="python-的格式化不生效">python 的格式化不生效</h3>
<p>前提：使用 mason 安装了 pyright、autopep8。</p>
<p>解决方法：添加 conform 配置，</p>
<p><img src="https://i.imgur.com/yvWyGGn.png" srcset="/img/loading.gif" lazyload /></p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-keyword">return</span> &#123;<br>  <span class="hljs-string">&quot;stevearc/conform.nvim&quot;</span>,<br>  optional = <span class="hljs-literal">true</span>,<br>  opts = &#123;<br>    formatters_by_ft = &#123;<br>      <span class="hljs-comment">-- autopep8 似乎要比 black 要快一些</span><br>      [<span class="hljs-string">&quot;python&quot;</span>] = &#123; <span class="hljs-string">&quot;autopep8&quot;</span> &#125;,<br>    &#125;,<br>  &#125;,<br>&#125;<br></code></pre></div></td></tr></table></figure>
<h3
id="禁止底部的原生状态栏打印-normal-模式下的一些动作键">禁止底部的原生状态栏打印
normal 模式下的一些动作键</h3>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">opt.showcmd = <span class="hljs-literal">false</span><br></code></pre></div></td></tr></table></figure>
<p>参考：<a
target="_blank" rel="noopener" href="https://www.reddit.com/r/neovim/comments/10m2j53/how_to_disable_output_of_navigation_keys_h_j_k_l/"
class="uri">https://www.reddit.com/r/neovim/comments/10m2j53/how_to_disable_output_of_navigation_keys_h_j_k_l/</a></p>
<h2 id="pyright-没有被检测到">pyright 没有被检测到</h2>
<figure class="highlight pgsql"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs pgsql">Spawning <span class="hljs-keyword">language</span> <span class="hljs-keyword">server</span> <span class="hljs-keyword">with</span> cmd: pyright-langserver failed. The <span class="hljs-keyword">language</span> <span class="hljs-keyword">server</span> <span class="hljs-keyword">is</span> either <span class="hljs-keyword">not</span> installed, missing <span class="hljs-keyword">from</span> <span class="hljs-type">PATH</span>, <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> executable.<br></code></pre></div></td></tr></table></figure>
<p>这个应该是我在某一次升级的时候，可能 mason install pyright
没有正确更新 pyright 导致的。那么，简单一点，直接全局安装一下 pyright
即可，</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm install -g pyright<br></code></pre></div></td></tr></table></figure>
<p>参考：<a target="_blank" rel="noopener" href="https://github.com/neovim/neovim/issues/17354"
class="uri">https://github.com/neovim/neovim/issues/17354</a></p>
<h2 id="neovim-how-to-disable-autoindent-triggered-by-colon-char">Neovim
how to disable autoindent triggered by colon char</h2>
<p>比如，我们在输入 <code>std:</code> 的时候，当输入第一个
<code>:</code>
的时候，程序会自动把当前行反缩进到开头，真是令人不爽。</p>
<p>案：这个问题，我今天几乎是爬梳了一整天，才终于找到结果和线索。真是让我一顿好找。</p>
<p>最终的解决方案是这个：</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua">opt.cinkeys = <span class="hljs-string">&quot;0&#123;,0&#125;,0),0],0#,!^F,o,O,e&quot;</span><br>opt.indentkeys = <span class="hljs-string">&quot;0&#123;,0&#125;,0),0],0#,!^F,o,O,e&quot;</span><br></code></pre></div></td></tr></table></figure>
<p>就是把触发缩进的字符集中去掉 <code>:</code>。</p>
<h2
id="neovimlazyvim-在-insert-模式下按下-esc-jk-会移动文本行">Neovim/Lazyvim
在 insert 模式下按下 Esc + j/k 会移动文本行</h2>
<p>我是在 Windows Terminal 中遇到的这个问题。其他的终端或者 GUI
前端可能也会有类似的问题。原因大概是终端/Neovim 会把
<code>Esc + j/k</code> 当成是 <code>Alt + j/k</code>，而
<code>Alt + j/k</code> 在 Lazyvim 中就是被映射成来 move lines
的，所以，我们就可以从这方面着手，重新映射一下快捷键即可，</p>
<figure class="highlight lua"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs lua"><span class="hljs-comment">-- unmap for moving lines</span><br>unmap(&#123; <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;i&quot;</span> &#125;, <span class="hljs-string">&quot;&lt;A-j&gt;&quot;</span>)<br>unmap(&#123; <span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;i&quot;</span> &#125;, <span class="hljs-string">&quot;&lt;A-k&gt;&quot;</span>)<br><br><span class="hljs-comment">-- remap for moving lines</span><br>map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;C-A-j&gt;&quot;</span>, <span class="hljs-string">&quot;&lt;cmd&gt;m .+1&lt;cr&gt;==&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Move Down&quot;</span> &#125;)<br>map(<span class="hljs-string">&quot;n&quot;</span>, <span class="hljs-string">&quot;&lt;C-A-k&gt;&quot;</span>, <span class="hljs-string">&quot;&lt;cmd&gt;m .-2&lt;cr&gt;==&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Move Up&quot;</span> &#125;)<br>map(<span class="hljs-string">&quot;i&quot;</span>, <span class="hljs-string">&quot;&lt;C-A-j&gt;&quot;</span>, <span class="hljs-string">&quot;&lt;esc&gt;&lt;cmd&gt;m .+1&lt;cr&gt;==gi&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Move Down&quot;</span> &#125;)<br>map(<span class="hljs-string">&quot;i&quot;</span>, <span class="hljs-string">&quot;&lt;C-A-k&gt;&quot;</span>, <span class="hljs-string">&quot;&lt;esc&gt;&lt;cmd&gt;m .-2&lt;cr&gt;==gi&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Move Up&quot;</span> &#125;)<br>map(<span class="hljs-string">&quot;v&quot;</span>, <span class="hljs-string">&quot;&lt;C-A-j&gt;&quot;</span>, <span class="hljs-string">&quot;:m &#x27;&gt;+1&lt;cr&gt;gv=gv&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Move Down&quot;</span> &#125;)<br>map(<span class="hljs-string">&quot;v&quot;</span>, <span class="hljs-string">&quot;&lt;C-A-k&gt;&quot;</span>, <span class="hljs-string">&quot;:m &#x27;&lt;-2&lt;cr&gt;gv=gv&quot;</span>, &#123; desc = <span class="hljs-string">&quot;Move Up&quot;</span> &#125;)<br></code></pre></div></td></tr></table></figure>
<p>这里参考了以下的材料，</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/LunarVim/LunarVim/issues/1857"
class="uri">https://github.com/LunarVim/LunarVim/issues/1857</a></li>
<li><a
target="_blank" rel="noopener" href="https://www.reddit.com/r/neovim/comments/15kgw4g/lazyvim_escape_jk_line_switching/"
class="uri">https://www.reddit.com/r/neovim/comments/15kgw4g/lazyvim_escape_jk_line_switching/</a></li>
</ul>
<hr />
<p>参考：<br />
1、<a
target="_blank" rel="noopener" href="https://neovim.io/doc/user/options.html#&#39;indentkeys&#39;"
class="uri">https://neovim.io/doc/user/options.html#'indentkeys'</a><br />
2、<a target="_blank" rel="noopener" href="https://vim.fandom.com/wiki/How_to_stop_auto_indenting"
class="uri">https://vim.fandom.com/wiki/How_to_stop_auto_indenting</a></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Neovim/">Neovim</a>
                    
                      <a class="hover-with-bg" href="/tags/%E6%9C%AA%E7%AB%9F/">未竟</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    <b>版权声明：</b> 本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/11/27/Vim-edit-E518-Unknown-option/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Vim(edit):E518: Unknown option</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/11/24/The-most-fantastic-feature-in-Neovim-that-I-am-enjoying/">
                        <span class="hidden-mobile">Neovim 中最迷人的功能</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    
      <script type="text/javascript">
        var disqus_config = function() {
          this.page.url = 'http://example.com/2023/11/25/Lazyvim-configure-from-scratch/';
          this.page.identifier = '/2023/11/25/Lazyvim-configure-from-scratch/';
        };
        Fluid.utils.loadComments('#disqus_thread', function() {
          var d = document, s = d.createElement('script');
          s.src = '//' + 'https-fanlumaster-github-io' + '.disqus.com/embed.js';
          s.setAttribute('data-timestamp', new Date());
          (d.head || d.body).appendChild(s);
        });
      </script>
    
    <noscript>Please enable JavaScript to view the comments</noscript>
  </div>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://fanyfull.monster" target="_blank" rel="nofollow noopener"><span>FanyFull</span></a> <i class="iconfont icon-love"></i> <a href="https://fanyfull.top/@fanyfull" target="_blank" rel="nofollow noopener"><span>Monster</span></a> <i class="iconfont icon-love"></i> <a href="https://fanyfull.github.io" target="_blank" rel="nofollow noopener"><span>Another</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.2/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        loader: {
          
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-svg.js" ></script>

  










  
<script src="/js/custom.js"></script>



<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
